define("winEvaluation",[],function(){return{isWinningBoard:function(e,t){var n=[];for(var r=0;r<7;r++){var i=e.getRow(r);for(var s=0;s<6;s++)i[s]==t&&(n[7*r+s]=!0)}return this.checkAlignment(n,1)?!0:this.checkAlignment(n,7)?!0:this.checkAlignment(n,8)?!0:this.checkAlignment(n,6)},shiftArrayLeft:function(e,t){var n=[];for(var r=t;r<e.length;r++)n[r-t]=e[r];return n},arrayAnd:function(e,t){var n=[];for(var r=0;r<e.length;r++)n[r]=e[r]+t[r];return n},checkAlignment:function(e,t){var n=this.shiftArrayLeft(e,0);for(var r=1;r<4;r++)n=this.arrayAnd(n,this.shiftArrayLeft(e,t*r));for(var i=0;i<n.length;i++)if(n[i])return!0;return!1}}}),define("game",[],function(){var e=function(){},t=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])};return t(e,{getPlayer:function(e){return this.getPlayerBy(function(t){return t.playerID==e})},getPlayerWithTurn:function(){return this.getPlayerBy(function(e){return e.status=="has_turn"})},getPlayers:function(e){return this.players.filter(e)},getPlayerBy:function(e){var t=this.getPlayers(e);return t.length?t[0]:null},getPlayerColor:function(e){var t=this.getPlayer(e);return t.playerColor},getOwnColor:function(){return this.getPlayerColor(this.ownPlayerID)},getOwnPlayer:function(){return this.getPlayer(this.ownPlayerID)},hasTurn:function(){var e=this.getOwnPlayer();return e.status=="has_turn"},isOver:function(){return this.status=="game_is_over"},getWinner:function(){return this.getPlayerBy(function(e){return e.status=="winner"})},initialize:function(e){this.loadMeta(e),this.state=e.state},loadMeta:function(e){this.players=e.players,this.status=e.status,this.ownPlayerID=e.ownPlayerID},getRow:function(e){return this.state["row_"+e]},canPlace:function(e){var t=this.getRow(e);return this.hasTurn()&&t.length<6}}),e}),define("server",["winEvaluation","game"],function(e,t){Plynd.ServerFunctions.hello=function(e,t,n){t({hello:"Cachan"})},Plynd.ServerFunctions.initializeGame=function(e,t,n){var r={};for(var i=0;i<7;i++)r["row_"+i]||(r["row_"+i]=[]);Plynd.initializeState(r,t,n)},Plynd.ServerFunctions.onNewEvent=function(n,r,i){var s=n.row,o=new t;Plynd.getGame(function(t){o.initialize(t);if(!o.hasTurn())return i({code:403,data:"Not this player's turn"});var n=o.getRow(s);if(n.length>=6)return i({code:403,data:"The row "+s+" is full"});var u=o.getOwnPlayer(),a=u.playerID;n.push(a);var f={row:s};e.isWinningBoard(o,a)?f.winnerID=a:f.endTurn=!0;var l=function(e){r(e.event)};Plynd.updateGame(f,o.state,l,i)})}});